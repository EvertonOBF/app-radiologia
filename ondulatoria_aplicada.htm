<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulado Diagn√≥stico: Ondulat√≥ria na Radiologia</title>
    <style>
        :root { --primary: #0284c7; --success: #16a34a; --error: #dc2626; --bg: #f0f9ff; --text: #0f172a; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: var(--bg); margin: 0; padding: 15px; color: var(--text); line-height: 1.6; }
        .container { max-width: 800px; margin: auto; background: white; padding: 25px; border-radius: 16px; box-shadow: 0 8px 25px rgba(0,0,0,0.08); }
        h1 { font-size: 1.8rem; color: #0369a1; text-align: center; margin-top: 5px; margin-bottom: 5px; }
        p.subtitle { text-align: center; color: #64748b; font-size: 1rem; margin-bottom: 30px; }
        
        .question-card { background: #ffffff; border: 2px solid #e2e8f0; padding: 20px; border-radius: 12px; margin-bottom: 25px; transition: border-color 0.3s; }
        .question-card:hover { border-color: #bae6fd; }
        .q-text { font-weight: 700; font-size: 1.1rem; display: block; margin-bottom: 18px; color: #1e293b; }
        
        .options-list { display: flex; flex-direction: column; gap: 12px; }
        .opt-btn { background: #f8fafc; border: 2px solid #cbd5e1; padding: 15px; border-radius: 8px; cursor: pointer; text-align: left; font-size: 1rem; font-weight: 500; color: #334155; transition: all 0.2s ease; -webkit-tap-highlight-color: transparent; }
        .opt-btn:hover:not([style*="pointer-events: none"]) { background: #f1f5f9; border-color: #94a3b8; }
        .opt-btn:active:not([style*="pointer-events: none"]) { transform: scale(0.98); }
        
        .correct { background-color: #dcfce7 !important; border-color: var(--success) !important; color: #14532d !important; font-weight: 700; }
        .incorrect { background-color: #fee2e2 !important; border-color: var(--error) !important; color: #7f1d1d !important; font-weight: 700; text-decoration: line-through; }
        
        .feedback { margin-top: 15px; padding: 15px; background: #e0f2fe; border-radius: 8px; font-size: 0.95rem; display: none; border-left: 5px solid var(--primary); color: #0369a1; animation: fadeIn 0.4s ease-in-out; }
        
        /* Estilos do Resultado Final */
        #result-container { display: none; background: #f8fafc; border: 2px dashed #0ea5e9; padding: 25px; border-radius: 12px; margin-top: 30px; text-align: center; animation: fadeIn 0.6s ease-in-out; }
        .score-circle { width: 100px; height: 100px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; margin: 0 auto 15px auto; }
        .result-title { font-size: 1.5rem; color: #0f172a; margin-bottom: 10px; }
        .diagnostic-box { background: #fff; border: 1px solid #e2e8f0; padding: 15px; border-radius: 8px; text-align: left; margin-top: 20px; }
        .diagnostic-box h3 { color: #b91c1c; margin-top: 0; font-size: 1.1rem; }
        .diagnostic-box ul { padding-left: 20px; color: #475569; }
        .diagnostic-box li { margin-bottom: 8px; }
        
        .btn-reload { width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 10px; font-weight: bold; font-size: 1.1rem; cursor: pointer; margin-top: 25px; transition: background 0.3s; }
        .btn-reload:hover { background: #0369a1; }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>Ondulat√≥ria Aplicada</h1>
    <p class="subtitle">Conectando a F√≠sica ao dia a dia do T√©cnico em Radiologia</p>

    <div id="quiz-flow"></div>

    <div id="result-container">
        <div class="score-circle"><span id="score-text">0/10</span></div>
        <h2 class="result-title" id="result-title">An√°lise de Desempenho</h2>
        <p id="result-message"></p>
        
        <div class="diagnostic-box" id="diagnostic-box" style="display: none;">
            <h3>‚ö†Ô∏è Aten√ß√£o aos seguintes t√≥picos:</h3>
            <p>Com base nos seus erros, recomendamos que voc√™ revise os seguintes conceitos:</p>
            <ul id="weak-topics-list"></ul>
        </div>
        
        <button class="btn-reload" onclick="location.reload()">Refazer Simulado</button>
    </div>
</div>

<script>
// Array de quest√µes com a adi√ß√£o da propriedade "topic"
const questions = [
    {
        q: "1. Ao aumentar o kV no painel de comando, o t√©cnico gera um feixe de Raios X com maior poder de penetra√ß√£o. Fisicamente, o que ocorre com a onda?",
        options: ["A onda aumenta seu comprimento e diminui sua frequ√™ncia.", "A onda se torna mec√¢nica para atravessar o osso.", "A onda diminui seu comprimento e aumenta sua frequ√™ncia.", "A amplitude da onda √© multiplicada por dez.", "A velocidade da onda supera a velocidade da luz."],
        correct: 2,
        topic: "Rela√ß√£o kV, Frequ√™ncia e Comprimento de Onda",
        exp: "O kV controla a qualidade (energia). Mais kV = Alta Frequ√™ncia = Curto Comprimento de Onda."
    },
    {
        q: "2. O t√©cnico ajusta o mAs para clarear ou escurecer a imagem. Alterar a quantidade de f√≥tons sem alterar sua energia de penetra√ß√£o afeta qual propriedade da onda?",
        options: ["Frequ√™ncia", "Amplitude", "Comprimento de onda", "Velocidade de propaga√ß√£o", "Natureza eletromagn√©tica"],
        correct: 1,
        topic: "Intensidade e Amplitude (mAs)",
        exp: "O mAs altera a Amplitude (intensidade) do feixe, a 'quantidade' de f√≥tons, mas n√£o o comprimento de onda ou a frequ√™ncia."
    },
    {
        q: "3. Por que os Raios X s√£o capazes de ionizar √°tomos do corpo humano, enquanto as ondas do r√°dio FM n√£o s√£o?",
        options: ["Porque os Raios X possuem baix√≠ssima frequ√™ncia.", "Porque ondas de r√°dio s√£o mais r√°pidas.", "Porque os Raios X possuem alt√≠ssima frequ√™ncia e muita energia.", "Porque ondas de r√°dio possuem comprimento de onda muito curto.", "Porque os Raios X s√£o ondas sonoras potentes."],
        correct: 2,
        topic: "Poder de Ioniza√ß√£o e Energia",
        exp: "A ioniza√ß√£o depende da energia da onda. Raios X (alta frequ√™ncia) conseguem arrancar el√©trons dos √°tomos."
    },
    {
        q: "4. Qual a diferen√ßa essencial entre as ondas utilizadas num aparelho de Raios X e num aparelho de Ultrassonografia?",
        options: ["O Raio X √© eletromagn√©tico (viaja no v√°cuo); o Ultrassom √© mec√¢nico (precisa de mat√©ria).", "O Ultrassom √© mais r√°pido que a velocidade da luz.", "Ambas s√£o eletromagn√©ticas, mas o Ultrassom tem maior frequ√™ncia.", "O Raio X exige um meio gel para se propagar no ar.", "O Ultrassom causa mais ioniza√ß√£o que o Raio X."],
        correct: 0,
        topic: "Ondas Mec√¢nicas vs Eletromagn√©ticas",
        exp: "Ultrassom usa ondas sonoras (mec√¢nicas). Raios X s√£o eletromagn√©ticos e n√£o precisam de meio material."
    },
    {
        q: "5. Em termos de ondulat√≥ria, um 'feixe duro' (√≥timo para ossos espessos) caracteriza-se por:",
        options: ["Grande comprimento de onda e baixa frequ√™ncia.", "Pequena amplitude e baixa velocidade.", "Curto comprimento de onda e alta frequ√™ncia.", "Ondas que se propagam em zigue-zague.", "Nenhuma frequ√™ncia associada."],
        correct: 2,
        topic: "Qualidade do Feixe (Duro/Mole)",
        exp: "Um feixe 'duro' √© altamente penetrante, traduzindo-se em curto comprimento de onda e alta frequ√™ncia."
    },
    {
        q: "6. Qual √© a velocidade aproximada de propaga√ß√£o dos Raios X ao sair da ampola no v√°cuo?",
        options: ["340 m/s (velocidade do som)", "1.500 m/s (velocidade no tecido mole)", "300.000 km/s (velocidade da luz)", "Depende do valor do mAs utilizado.", "100.000 km/h"],
        correct: 2,
        topic: "Velocidade de Propaga√ß√£o",
        exp: "Raios X viajam na velocidade da luz no v√°cuo (aprox. 300.000 km/s)."
    },
    {
        q: "7. A atenua√ß√£o sofrida pelo feixe de Raios X ao atravessar o paciente causa redu√ß√£o em qual aspecto da onda?",
        options: ["Frequ√™ncia", "Velocidade", "Intensidade (Amplitude)", "Comprimento de onda", "Dire√ß√£o gravitacional"],
        correct: 2,
        topic: "Atenua√ß√£o de Feixe",
        exp: "A atenua√ß√£o diminui a quantidade de f√≥tons que chegam ao receptor, reduzindo a intensidade (amplitude) do feixe."
    },
    {
        q: "8. Onde se encontram os Raios X no Espectro Eletromagn√©tico?",
        options: ["Abaixo das ondas de r√°dio.", "Entre o infravermelho e as micro-ondas.", "Acima do ultravioleta e antes/junto aos Raios Gama.", "Exatamente na mesma faixa da luz vermelha.", "Fora do espectro eletromagn√©tico."],
        correct: 2,
        topic: "Espectro Eletromagn√©tico",
        exp: "Ocupam a extremidade de alta energia do espectro, logo ap√≥s o ultravioleta e dividindo espa√ßo com os Raios Gama."
    },
    {
        q: "9. Onde o comportamento 'part√≠cula' (f√≥ton) dos Raios X √© mais evidente na radiologia?",
        options: ["Quando viajam pelo espa√ßo sideral.", "Na hora em que interagem (colidem) com o corpo do paciente.", "Apenas quando o equipamento est√° desligado.", "Quando formam ondas sonoras no ar.", "Quando sofrem refra√ß√£o numa lente de vidro."],
        correct: 1,
        topic: "Dualidade Onda-Part√≠cula",
        exp: "Viajam como ondas, mas interagem com a mat√©ria (paciente/receptor) como part√≠culas (f√≥tons)."
    },
    {
        q: "10. Se um t√©cnico diminuir significativamente o kV para radiografar uma m√£o (tecido fino), o que acontecer√° com o comprimento de onda do feixe?",
        options: ["Ficar√° mais curto.", "N√£o sofrer√° altera√ß√£o.", "Ficar√° mais longo, resultando em um feixe menos penetrante.", "A onda deixar√° de existir.", "A velocidade da onda cair√° pela metade."],
        correct: 2,
        topic: "Aplica√ß√£o Pr√°tica do kV",
        exp: "Menos kV = Menor Frequ√™ncia = Maior Comprimento de Onda. Cria um feixe 'mole', ideal para ossos finos."
    }
];

// Vari√°veis de controle do estado do simulado
let score = 0;
let questionsAnswered = 0;
let wrongTopics = new Set(); // Usa Set para evitar t√≥picos duplicados

const quizContainer = document.getElementById('quiz-flow');
const resultContainer = document.getElementById('result-container');

questions.forEach((item, index) => {
    const card = document.createElement('div');
    card.className = 'question-card';
    
    const qText = document.createElement('span');
    qText.className = 'q-text';
    qText.innerHTML = item.q;
    card.appendChild(qText);
    
    const optsDiv = document.createElement('div');
    optsDiv.className = 'options-list';
    
    const feedbackDiv = document.createElement('div');
    feedbackDiv.className = 'feedback';
    feedbackDiv.innerHTML = `<strong>üí° Explica√ß√£o Did√°tica:</strong> ${item.exp}`;
    
    item.options.forEach((optText, optIndex) => {
        const btn = document.createElement('button');
        btn.className = 'opt-btn';
        btn.innerText = optText;
        
        btn.onclick = function() {
            const allBtns = optsDiv.querySelectorAll('.opt-btn');
            allBtns.forEach(b => b.style.pointerEvents = 'none'); // Trava os bot√µes
            
            questionsAnswered++;
            
            if (optIndex === item.correct) {
                btn.classList.add('correct');
                score++;
            } else {
                btn.classList.add('incorrect');
                allBtns[item.correct].classList.add('correct');
                wrongTopics.add(item.topic); // Registra a dificuldade do aluno
            }
            
            feedbackDiv.style.display = 'block';
            
            // Verifica se o simulado acabou
            if (questionsAnswered === questions.length) {
                setTimeout(showFinalResults, 800); // Pequeno delay para o aluno ler a √∫ltima explica√ß√£o
            }
        };
        
        optsDiv.appendChild(btn);
    });
    
    card.appendChild(optsDiv);
    card.appendChild(feedbackDiv);
    quizContainer.appendChild(card);
});

function showFinalResults() {
    resultContainer.style.display = 'block';
    document.getElementById('score-text').innerText = `${score}/10`;
    
    const titleEl = document.getElementById('result-title');
    const msgEl = document.getElementById('result-message');
    const diagBox = document.getElementById('diagnostic-box');
    const weakList = document.getElementById('weak-topics-list');
    
    // L√≥gica de Feedback Mentor
    if (score === 10) {
        titleEl.innerText = "Excepcional!";
        titleEl.style.color = "#16a34a";
        msgEl.innerHTML = "Voc√™ dominou completamente os fundamentos de ondulat√≥ria aplicados √† radiologia. Seu racioc√≠nio t√©cnico est√° afiad√≠ssimo!";
    } else if (score >= 7) {
        titleEl.innerText = "Muito Bom!";
        titleEl.style.color = "#0284c7";
        msgEl.innerHTML = "Voc√™ tem uma √≥tima base! Apenas alguns pequenos detalhes escaparam. Revise os pontos abaixo para atingir a excel√™ncia.";
    } else {
        titleEl.innerText = "Aten√ß√£o aos Fundamentos";
        titleEl.style.color = "#b91c1c";
        msgEl.innerHTML = "A f√≠sica das radia√ß√µes pode ser desafiadora no in√≠cio. N√£o desanime! O segredo √© revisar a teoria com calma e refazer o simulado.";
    }
    
    // Mostra os t√≥picos que precisam de revis√£o
    if (wrongTopics.size > 0) {
        diagBox.style.display = 'block';
        weakList.innerHTML = '';
        wrongTopics.forEach(topic => {
            const li = document.createElement('li');
            li.innerHTML = `<strong>${topic}</strong>`;
            weakList.appendChild(li);
        });
    }
    
    // Rola a tela suavemente para o resultado
    resultContainer.scrollIntoView({ behavior: 'smooth', block: 'end' });
}
</script>
</body>
</html>